<Page
    x:Class="BUDDY.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:BUDDY"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
    xmlns:oxy="using:OxyPlot.Windows"
    xmlns:syncfusion="using:Syncfusion.UI.Xaml.Grid"
    xmlns:sfchart="using:Syncfusion.UI.Xaml.Charts"
    xmlns:controls="using:Microsoft.Toolkit.Uwp.UI.Controls"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <!--<Page.DataContext>
        <local:SpectrumModel/>
    </Page.DataContext>-->

    <Page.Resources>
        <SolidColorBrush x:Key="ToggleSwitchKnobFillOff" Color="White"/>
        <SolidColorBrush x:Key="ToggleSwitchKnobFillOn" Color="White"/>
        <SolidColorBrush x:Key="ToggleSwitchFillOff" Color="#757cbb"/>
        <SolidColorBrush x:Key="ToggleSwitchFillOn" Color="#757cbb"/>
        <SolidColorBrush x:Key="ToggleSwitchStrokeOff" Color="Transparent"/>
        <SolidColorBrush x:Key="ToggleSwitchStrokeOn" Color="Transparent"/>
        <SolidColorBrush x:Key="ToggleSwitchKnobFillOffPressed" Color="White"/>
        <SolidColorBrush x:Key="ToggleSwitchKnobFillOnPressed" Color="White"/>
        <SolidColorBrush x:Key="ToggleSwitchFillOffPressed" Color="#605ea8"/>
        <SolidColorBrush x:Key="ToggleSwitchFillOnPressed" Color="#605ea8"/>
        <SolidColorBrush x:Key="ToggleSwitchFillOffPointerOver" Color="#757cbb"/>
        <SolidColorBrush x:Key="ToggleSwitchFillOnPointerOver" Color="#757cbb"/>
        <SolidColorBrush x:Key="ToggleSwitchKnobFillOffPointerOver" Color="White"/>
        <SolidColorBrush x:Key="ToggleSwitchKnobFillOnPointerOver" Color="White"/>
        <SolidColorBrush x:Key="ToggleSwitchStrokeOffPointerOver" Color="#FF353535"/>
        <SolidColorBrush x:Key="ToggleSwitchStrokeOnPointerOver" Color="#FF353535"/>
        <SolidColorBrush x:Key="TextControlBorderBrush" Color="#FF353535"/>
        <SolidColorBrush x:Key="TextControlBorderBrushPointerOver" Color="#605ea8"/>
        <SolidColorBrush x:Key="TextControlBorderBrushFocused" Color="#757cbb"/>

        <SolidColorBrush x:Key="CheckBoxCheckBackgroundFillChecked" Color="#757cbb"/>
        <SolidColorBrush x:Key="CheckBoxCheckBackgroundFillCheckedPressed" Color="#605ea8"/>
        <SolidColorBrush x:Key="CheckBoxCheckBackgroundFillCheckedPointerOver" Color="#605ea8"/>



        <SolidColorBrush x:Key="MenuDarkGrey" Color="#FF353535" />
        <SolidColorBrush x:Key="MenuLightGrey" Color="#FFEAEAEA" />
        <Style x:Key="fileCellStyle" TargetType="syncfusion:GridCell">
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontWeight" Value="Normal" />
            <Setter Property="FontSize" Value="14" />

            <!--<Setter Property="BorderBrush" Value="Black"/>
            <Setter Property="Height" Value="Auto"/>
            <Setter Property="Width" Value="Auto"/>-->
        </Style>
        <Style x:Key="fileHeaderStyle" TargetType="syncfusion:GridHeaderCellControl">
            <Setter Property="FontWeight" Value="Normal" />
            <Setter Property="FontSize" Value="15" />
            <Setter Property="BorderThickness" Value="0,0,0,1"/>
            <Setter Property="BorderBrush" Value="#FF615EA8"/>
            <Setter Property="Padding" Value="0,0,0,0"/>
        </Style>
        <Style x:Key="fileCellStyleB" TargetType="syncfusion:GridCell">
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontWeight" Value="Normal" />
            <Setter Property="FontSize" Value="13" />
        </Style>
        <Style x:Key="fileHeaderStyleB" TargetType="syncfusion:GridHeaderCellControl">
            <Setter Property="FontWeight" Value="Normal" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="BorderThickness" Value="0,0,0,1"/>
            <Setter Property="BorderBrush" Value="#FF615EA8"/>
            <Setter Property="Padding" Value="0,0,0,0"/>
        </Style>
        <local:StringToImageConverter x:Key="stringToImageConverter" />
        <local:AdductSelector x:Key="adductSelector"/>

        <Style x:Key="gridComboBoxStyle" TargetType="syncfusion:GridCell">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderBrush" Value="Transparent" />
            <Setter Property="BorderThickness" Value="0,0,0,0" />
            <Setter Property="Padding" Value="0,0,0,0" />
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="syncfusion:GridCell">
                        <Grid>
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="IndicationStates">
                                    <VisualState x:Name="HasError">
                                        <Storyboard>
                                            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="PART_InValidCellBorder" Storyboard.TargetProperty="Width">
                                                <EasingDoubleKeyFrame KeyTime="0" Value="0" />
                                                <EasingDoubleKeyFrame KeyTime="0" Value="10" />
                                            </DoubleAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_InValidCellBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                <DiscreteObjectKeyFrame KeyTime="0">
                                                    <DiscreteObjectKeyFrame.Value>
                                                        <Visibility>Visible</Visibility>
                                                    </DiscreteObjectKeyFrame.Value>
                                                </DiscreteObjectKeyFrame>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>

                                    <VisualState x:Name="NoError">
                                        <Storyboard BeginTime="0">
                                            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="PART_InValidCellBorder" Storyboard.TargetProperty="Width">
                                                <EasingDoubleKeyFrame KeyTime="0" Value="1" />
                                                <EasingDoubleKeyFrame KeyTime="0" Value="0" />
                                            </DoubleAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_InValidCellBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                                <DiscreteObjectKeyFrame KeyTime="0">
                                                    <DiscreteObjectKeyFrame.Value>
                                                        <Visibility>Collapsed</Visibility>
                                                    </DiscreteObjectKeyFrame.Value>
                                                </DiscreteObjectKeyFrame>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="BorderStates">
                                    <VisualState x:Name="NormalCell"/>
                                    <VisualState x:Name="FooterColumnCell">
                                        <Storyboard BeginTime="0">
                                            <ObjectAnimationUsingKeyFrames BeginTime="0"
                                                                          Duration="1"
                                                                          Storyboard.TargetName="PART_GridCellBorder"
                                                                          Storyboard.TargetProperty="BorderThickness">
                                                <DiscreteObjectKeyFrame KeyTime="0"
                                                                     Value="1,0,1,1"/>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="BeforeFooterColumnCell">
                                        <Storyboard BeginTime="0">
                                            <ObjectAnimationUsingKeyFrames BeginTime="0"
                                                                          Duration="1"
                                                                          Storyboard.TargetName="PART_GridCellBorder"
                                                                          Storyboard.TargetProperty="BorderThickness">
                                                <DiscreteObjectKeyFrame KeyTime="0"
                                                                     Value="0,0,0,1"/>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                            <Border Background="{TemplateBinding CellSelectionBrush}"
                                Visibility="{TemplateBinding SelectionBorderVisibility}" />
                            <Border x:Name="PART_GridCellBorder"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}">
                                <Grid>
                                    <ContentPresenter Margin="{TemplateBinding Padding}"
                                                  FontFamily="{TemplateBinding FontFamily}"
                                                  FontSize="{TemplateBinding FontSize}"
                                                 Foreground="{TemplateBinding Foreground}"/>
                                    <Path Width="14.3"
                                          Height="9.2"
                                          Margin="0,0,11,0"
                                          HorizontalAlignment="Right"
                                          VerticalAlignment="Center"                                             
                                          Data="F1M0,0L2.667,2.66665 5.3334,0 5.3334,-1.78168 2.6667,0.88501 0,-1.78168 0,0z"
                                          Fill="#FF757CBB"
                                          Stretch="Uniform"/>
                                </Grid>
                            </Border>
                            <Border Margin="0,0,0,0"
                                Background="Transparent"
                                BorderBrush="{TemplateBinding CurrentCellBorderBrush}"
                                BorderThickness="{TemplateBinding CurrentCellBorderThickness}"
                                IsHitTestVisible="False"
                                Visibility="{TemplateBinding CurrentCellBorderVisibility}" />
                            <Border x:Name="PART_InValidCellBorder"
                                Width="10"
                                Height="10"
                                HorizontalAlignment="Right"
                                Visibility="Collapsed"
                                VerticalAlignment="Top">
                                <ToolTipService.ToolTip>

                                    <ToolTip Background="#FF757CBB"
                                         Placement="Right"
                                         Tag="{TemplateBinding ErrorMessage}"
                                         Template="{StaticResource ValidationToolTipTemplate}" />

                                </ToolTipService.ToolTip>
                                <Path Data="M0.5,0.5 L12.652698,0.5 12.652698,12.068006 z"
                                  Fill="#FF757CBB"
                                  Stretch="Fill" />
                            </Border>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>

        </Style>


    </Page.Resources>


    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="18.5*"/>
            <ColumnDefinition Width="24.5*"/>
            <ColumnDefinition Width="12*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="35"/>
            <RowDefinition Height="1*"/>
        </Grid.RowDefinitions>

        <Grid Grid.Column="0" Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="45*"/>
                <ColumnDefinition Width="634*"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="5*"/>
                <RowDefinition Height="12*"/>
                <RowDefinition Height="10*"/>
            </Grid.RowDefinitions>

            <Border Grid.Column ="0" Grid.Row ="0" Background="#FFFAFAFA" BorderThickness="0,3,3,3" BorderBrush="White" Grid.ColumnSpan="2"/>
            <Border Grid.Column ="0" Grid.Row ="1" Background="#FFFAFAFA" BorderThickness="0,3,3,3"  BorderBrush="White" Grid.ColumnSpan="2"/>
            <Border Grid.Column ="0" Grid.Row ="2" Background="#FFFAFAFA" BorderThickness="0,3,3,3"  BorderBrush="White" Grid.ColumnSpan="2"/>
            <StackPanel Grid.Column="0" Grid.Row="0" HorizontalAlignment="Left" Background="#5B7099" Width="35" BorderThickness="0" BorderBrush="#FFBFBFBF" Margin="0,3,0,3" />
            <StackPanel Grid.Column="0" Grid.Row="1" HorizontalAlignment="Left" Background="#5B7099" Width="35" BorderThickness="0" BorderBrush="#FFBFBFBF" Margin="0,3,0,3" />
            <StackPanel Grid.Column="0" Grid.Row="2" HorizontalAlignment="Left" Background="#5B7099" Width="35" BorderThickness="0" BorderBrush="#FFBFBFBF" Margin="0,3,0,0" />
            <TextBlock Grid.Column="0" Text="File List" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="7,0,0,0" RenderTransformOrigin="0.3,0.82" 
                       Foreground="white" FontSize="20" Grid.ColumnSpan="2" UseLayoutRounding="False" d:LayoutRounding="Auto" >
                <TextBlock.RenderTransform>
                    <CompositeTransform Rotation="-90"/>
                </TextBlock.RenderTransform>
            </TextBlock>
            <TextBlock Grid.Column="0" Grid.Row="1" Text="Feature List" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="7,0,0,0" RenderTransformOrigin="0.3,1.24" 
                       Foreground="White" FontSize="20" Grid.ColumnSpan="2" UseLayoutRounding="False" d:LayoutRounding="Auto" >
                <TextBlock.RenderTransform>
                    <CompositeTransform Rotation="-90"/>
                </TextBlock.RenderTransform>
            </TextBlock>
            <TextBlock Grid.Column="0" Grid.Row="2" Text="Functional Viewer" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="7,0,0,0" RenderTransformOrigin="0.27,1.7" 
                       Foreground="White" FontSize="20" Grid.ColumnSpan="2" UseLayoutRounding="False" d:LayoutRounding="Auto">
                <TextBlock.RenderTransform>
                    <CompositeTransform Rotation="-90"/>
                </TextBlock.RenderTransform>
            </TextBlock>

            <syncfusion:SfDataGrid x:Name="dataGrid" Grid.Column="1" Grid.Row="0" Margin="0,5,10,45" BorderThickness="0" HeaderRowHeight="30" RowHeight="30"
                       ItemsSource="{Binding Files}" CellStyle="{StaticResource fileCellStyle}" HeaderStyle="{StaticResource fileHeaderStyle}"
                       AutoGenerateColumns="False" LiveDataUpdateMode="Default" SelectionUnit="Row" SelectionMode="Single" CurrentCellBorderThickness="0,0,0,0"
                       CurrentCellActivated="dataGrid_CurrentCellActivated" CurrentCellValueChanged="UpdateMS2Table">
                <syncfusion:SfDataGrid.DataContext>
                    <local:FileModel/>
                </syncfusion:SfDataGrid.DataContext>

                <syncfusion:SfDataGrid.Columns>
                    <syncfusion:GridCheckBoxColumn MappingName="Selected" HeaderText="" AllowEditing="True" AllowFocus="True" AllowSorting="True" 
                                               HorizontalAlignment="Center"  ColumnSizer="Auto"/>
                    <syncfusion:GridNumericColumn MappingName="Index" AllowEditing="False" AllowFocus="True" AllowSorting="True" 
                                           HorizontalHeaderContentAlignment="Center" TextAlignment="Center" ColumnSizer="Auto">
                        <syncfusion:GridNumericColumn.HeaderTemplate>
                            <DataTemplate>
                                <Image Height="18" Margin="0,0,0,0" Source="ms-appx:///Image/file.png"/>
                            </DataTemplate>
                        </syncfusion:GridNumericColumn.HeaderTemplate>
                    </syncfusion:GridNumericColumn>
                    <syncfusion:GridTextColumn MappingName="Ms2number" HeaderText="Feature #" AllowEditing="False" AllowFocus="True" AllowSorting="True" 
                                           HorizontalHeaderContentAlignment="Center" TextAlignment="Center" ColumnSizer="Auto"/>
                    <syncfusion:GridTextColumn MappingName="FileName" HeaderText="File Name" AllowEditing="False" AllowFocus="True" AllowSorting="True" 
                                           HorizontalHeaderContentAlignment="Center" TextAlignment="Center" ColumnSizer="AutoLastColumnFill"/>
                    <syncfusion:GridImageColumn MappingName="ImageLink" HeaderText="" AllowEditing="False" AllowFocus="False" AllowSorting="False" 
                                           HorizontalHeaderContentAlignment="Center" TextAlignment="Center" ImageHeight="15" Width="35"
                                           ImageWidth="15" ValueBinding="{Binding Path=ImageLink, Converter={StaticResource stringToImageConverter}}"/>
                    <!--<syncfusion:GridTextColumn MappingName="FilePath"/>-->
                </syncfusion:SfDataGrid.Columns>

            </syncfusion:SfDataGrid>
            <StackPanel Grid.Column="1" Grid.Row="0" VerticalAlignment="Bottom" HorizontalAlignment="Right" Orientation="Horizontal" Margin="0,0,0,0">
                <Button Content="Clear Selected" Width="130" Height="30" FontSize="14" CornerRadius="5,5,5,5" Margin="0,0,35,10" Click="fileClearSelected_Click"/>
                <Button Content="Clear All" Width="100" Height="30" FontSize="14" CornerRadius="5,5,5,5" Margin="0,0,10,10" Click="fileClearAll_Click"/>
            </StackPanel>


            <StackPanel Grid.Column="1" Grid.Row="0" VerticalAlignment="Bottom" HorizontalAlignment="Left" Orientation="Horizontal" Margin="5,0,0,18">
                <TextBlock x:Name="loadFileReminderText" Text="Loading" HorizontalAlignment="Left" VerticalAlignment="Center" FontSize="13" Foreground="#8c8c8c" 
                           CharacterSpacing="20" Margin="5,0,10,0"  Visibility="Collapsed"/>
                <ProgressBar x:Name="loadFileProgressbar" Visibility="Collapsed"  VerticalAlignment="Center" Height="10" Width="200" Margin="0,5,0,2"
                             IsIndeterminate="True" CornerRadius="5,5,5,5" />
            </StackPanel>


            <syncfusion:SfDataGrid x:Name="ms2grid" Grid.Column="1" Grid.Row="1" Margin="0,5,10,88" BorderThickness="0" HeaderRowHeight="30" RowHeight="30"
                       ItemsSource="{Binding MS2s}" CellStyle="{StaticResource fileCellStyle}" HeaderStyle="{StaticResource fileHeaderStyle}"
                       AutoGenerateColumns="False" LiveDataUpdateMode="Default" SelectionUnit="Row" SelectionMode="Extended" CurrentCellBorderThickness="0,0,0,0"
                       CurrentCellActivated="ms2grid_CurrentCellActivated" AllowDraggingRows="True" AllowDrop="True" AllowRowHoverHighlighting="True" RowHoverHighlightingBrush="#B2A4ABD6">
                <syncfusion:SfDataGrid.DataContext>
                    <local:Ms2Model/>
                </syncfusion:SfDataGrid.DataContext>

                <syncfusion:SfDataGrid.Columns>
                    <syncfusion:GridCheckBoxColumn MappingName="Selected" HeaderText="" AllowEditing="True" AllowFocus="True" AllowSorting="True" 
                                               HorizontalAlignment="Center" Width="40" TextAlignment="Center"/>
                    <syncfusion:GridNumericColumn MappingName="FileIndex" AllowEditing="False" AllowFocus="True" AllowSorting="True" 
                                           HorizontalHeaderContentAlignment="Center" Width="30" TextAlignment="Center">
                        <syncfusion:GridNumericColumn.HeaderTemplate>
                            <DataTemplate>
                                <Image Height="18" Margin="0,0,0,0" Source="ms-appx:///Image/file.png"/>
                            </DataTemplate>
                        </syncfusion:GridNumericColumn.HeaderTemplate>
                    </syncfusion:GridNumericColumn>
                    <syncfusion:GridNumericColumn MappingName="ScanNumber" HeaderText="Index" AllowEditing="False" AllowFocus="True" AllowSorting="True" 
                                           HorizontalHeaderContentAlignment="Center" ColumnSizer="AutoWithLastColumnFill" TextAlignment="Center"/>
                    <syncfusion:GridNumericColumn MappingName="Mz" HeaderText="m/z" AllowEditing="False" AllowFocus="True" AllowSorting="True" 
                                           HorizontalHeaderContentAlignment="Center" ColumnSizer="AutoWithLastColumnFill" TextAlignment="Center"/>
                    <syncfusion:GridNumericColumn MappingName="Rt" HeaderText="RT (min)" AllowEditing="False" AllowFocus="True" AllowSorting="True" 
                                           HorizontalHeaderContentAlignment="Center" ColumnSizer="AutoWithLastColumnFill" TextAlignment="Center"/>
                    <syncfusion:GridTextColumn MappingName="Polarity" AllowEditing="False" AllowFocus="True" AllowSorting="True" Width="35"
                                           HorizontalHeaderContentAlignment="Center" ColumnSizer="AutoWithLastColumnFill" TextAlignment="Center">
                        <syncfusion:GridTextColumn.HeaderTemplate>
                            <DataTemplate>
                                <TextBlock Text="+/-"  ToolTipService.ToolTip="Ionization polarity: + for positive ion mode; - for negative ion mode."/>
                            </DataTemplate>
                        </syncfusion:GridTextColumn.HeaderTemplate>
                    </syncfusion:GridTextColumn>
                    <!--<syncfusion:GridComboBoxColumn MappingName="Polarity" ItemsSource="{Binding Path=DataContext.Polarity, ElementName=ms2grid}"
                                               HeaderText="Mode" HorizontalHeaderContentAlignment="Center" ColumnSizer="Auto" TextAlignment="Center" AllowEditing="True"/>-->
                    <syncfusion:GridComboBoxColumn ColumnSizer="AutoWithLastColumnFill" HorizontalHeaderContentAlignment="Center"
                                       ItemsSourceSelector="{StaticResource adductSelector}" AllowFocus="True" AllowSorting="True" TextAlignment="Center"
                                       MappingName="Adduct.Formula" AllowEditing="True">
                        <syncfusion:GridComboBoxColumn.HeaderTemplate>
                            <DataTemplate>
                                <TextBlock Text="Adduct ≡↓" ToolTipService.ToolTip="Double click to select adducts"/>
                            </DataTemplate>
                        </syncfusion:GridComboBoxColumn.HeaderTemplate>
                    </syncfusion:GridComboBoxColumn>
                    <syncfusion:GridImageColumn MappingName="ImageLink" HeaderText="Status" AllowEditing="True" AllowFocus="False" AllowSorting="True" 
                                           HorizontalHeaderContentAlignment="Center" ColumnSizer="AutoWithLastColumnFill" TextAlignment="Center" ImageHeight="15"
                                           ImageWidth="15" ValueBinding="{Binding Path=ImageLink, Converter={StaticResource stringToImageConverter}}"/>
                    <!--<syncfusion:GridTextColumn MappingName="FilePath"/>-->
                </syncfusion:SfDataGrid.Columns>

            </syncfusion:SfDataGrid>

            <StackPanel Grid.Column="1" Grid.Row="1" VerticalAlignment="Bottom" HorizontalAlignment="Right" Orientation="Vertical" Margin="0,0,10,10" >
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,0,0,0">
                    <Button Content="Select Multiple" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Height="30" Width="130"
                        FontSize="14" CornerRadius="5,5,5,5" Click="SelectMultipleMs2_Click" Margin="0,0,25,0" ToolTipService.ToolTip="Check multiple highlighted MS2."/>
                    <Button Content="(Un)Select All" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Height="30" Width="130"
                        FontSize="14" CornerRadius="5,5,5,5" Click="DeOrSelectAllMs2_Click" Margin="0,0,0,0"  ToolTipService.ToolTip="Click to select all or unselect all."/>
                </StackPanel>
                <StackPanel Orientation="Horizontal" Margin="0,8,0,0" HorizontalAlignment="Right" VerticalAlignment="Center">
                    <Button Content="Compute Selected" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Height="30" FontWeight="SemiBold" Width="150"
                        FontSize="14" CornerRadius="5,5,5,5" Click="CalculateMS2_Click" />
                </StackPanel>
            </StackPanel>

            <StackPanel Grid.Column="1" Grid.Row="1" VerticalAlignment="Bottom" HorizontalAlignment="Left" Orientation="Vertical" Margin="5,0,0,18">
                <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                    <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE946;" FontSize="13" Foreground="#FF9B9B9B" Margin="0,0,5,0" VerticalAlignment="Center"
                               ToolTipService.ToolTip="If experiment-specific annotation is applied, results will be available once all the query features in the file are completed."/>
                    <TextBlock x:Name="taskInProgress" HorizontalAlignment="Left" VerticalAlignment="Center" FontSize="13" Foreground="#8c8c8c" CharacterSpacing="15"
                           Visibility="Visible"/>                    
                    <TextBlock x:Name="calculatedMS2No" HorizontalAlignment="Left" VerticalAlignment="Center" FontSize="13" Foreground="#8c8c8c" CharacterSpacing="15" Margin="5,0,0,0"
                           Visibility="Visible"/>
                    <!--<TextBlock x:Name="calculationProgressSlash" Text="/" HorizontalAlignment="Left" VerticalAlignment="Center" FontSize="13" Foreground="#8c8c8c" CharacterSpacing="15" Margin="5,0,0,0"
                           Visibility="Collapsed"/>-->
                    <TextBlock x:Name="totalMS2No" HorizontalAlignment="Left" VerticalAlignment="Center" FontSize="13" Foreground="#8c8c8c" CharacterSpacing="15" Margin="0,0,0,0"
                           Visibility="Visible"/>
                </StackPanel>
                <muxc:ProgressBar x:Name="calculateMS2Progressbar" Visibility="Visible" BorderThickness="3" CornerRadius="5,5,5,5" VerticalAlignment="Center" Height="12" Width="250"/>
            </StackPanel>


            <StackPanel Grid.Column="1" Grid.Row="1" VerticalAlignment="Center" HorizontalAlignment="Center" Orientation="Horizontal" Margin="0,0,0,80">
                <TextBlock x:Name="emptyMS2ListMessage" Text="Check a file above to show feature list here" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="25" Foreground="#FFB9B9B9" FontWeight="Bold"
                           Visibility="Visible"/>
						
            </StackPanel>
			

            <muxc:TabView Grid.Column="0" Grid.Row="2" Margin="35,3,3,0" IsAddTabButtonVisible="False" TabWidthMode="SizeToContent" VerticalAlignment="Stretch" Grid.ColumnSpan="2">
                <muxc:TabView.TabItems>
                    <muxc:TabViewItem Header="Feature Spot Viewer" IsClosable="False" IsSelected="True">
                        <muxc:TabViewItem.IconSource>
                            <muxc:BitmapIconSource UriSource="/Image/scatterplot.png" ShowAsMonochrome="False" />
                        </muxc:TabViewItem.IconSource>
                        <muxc:TabViewItem.Content>
                            <oxy:PlotView x:Name="MS2Scatter" Background="#FFFAFAFA" Margin="10,10,10,10"/>
                        </muxc:TabViewItem.Content>
                    </muxc:TabViewItem>
                    <muxc:TabViewItem Header="Spectral Comparison" IsClosable="False" IsSelected="False">
                        <muxc:TabViewItem.IconSource>                            
							<muxc:BitmapIconSource UriSource="/Image/ms2comparison.png" ShowAsMonochrome="False" />
                        </muxc:TabViewItem.IconSource>
                        <muxc:TabViewItem.Content>
                            <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="1*"/>
                                    <RowDefinition Height="1*"/>
                                    <RowDefinition Height="40"/>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="200"/>
                                    <ColumnDefinition Width="1*"/>
                                </Grid.ColumnDefinitions>

                                <StackPanel x:Name="ms2ComparePanel_Top_empty" Orientation="Vertical" Grid.Column="0" Grid.Row="0" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="80,0,0,0">
                                    <Image Height="70" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,0,0,0" Source="ms-appx:///Image/dragdrop.png"/>
                                    <TextBlock Text="Drag &amp; Drop" FontSize="13" Foreground="#FFA4A4A4" FontWeight="Bold"/>
                                </StackPanel>
                                <StackPanel Grid.Column="0" Grid.Row="0" Margin="10,10,10,5" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" CornerRadius="10,10,10,10" BorderBrush="#FFCDCDCD" BorderThickness="1,1,1,1">
                                    <TextBlock x:Name="ms2CompareTop_Scan" Margin="90,7,10,0" FontSize="15" Visibility="Collapsed"/>
                                    <TextBlock x:Name="ms2CompareTop_Mz" Margin="90,7,10,0" FontSize="15" Visibility="Collapsed"/>
                                    <TextBlock x:Name="ms2CompareTop_Rt" Margin="90,7,10,0" FontSize="15" Visibility="Collapsed"/>
                                    <TextBlock x:Name="ms2CompareTop_Polarity" Margin="90,7,10,0" FontSize="15" Visibility="Collapsed"/>
                                </StackPanel>
                                <StackPanel Grid.Column="0" Grid.Row="0" Margin="10,10,0,5" Orientation="Vertical" HorizontalAlignment="Left" VerticalAlignment="Stretch" CornerRadius="10,10,10,10" Background="Gray" Width="80">
                                    <TextBlock Text="Index" Margin="10,10,10,0" FontSize="15" Foreground="White" HorizontalAlignment="Left"/>
                                    <TextBlock Text="m/z" Margin="10,7,10,0" FontSize="15" Foreground="White" HorizontalAlignment="Left" FontStyle="Italic"/>
                                    <TextBlock Text="RT (min)" Margin="10,7,10,0" FontSize="15" Foreground="White" HorizontalAlignment="Left"/>
                                    <TextBlock Text="Polarity" Margin="10,7,10,0" FontSize="15" Foreground="White" HorizontalAlignment="Left"/>
                                </StackPanel>
                                <StackPanel x:Name="ms2ComparePanel_Top" Grid.Column="0" Grid.Row="0" Margin="10,10,10,5" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" CornerRadius="10,10,10,10" AllowDrop="True" Background="#00F1F1F1"/>

                                <StackPanel x:Name="ms2ComparePanel_Bottom_empty" Orientation="Vertical" Grid.Column="0" Grid.Row="1" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="80,0,0,0">
                                    <Image Height="70" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,0,0,0" Source="ms-appx:///Image/dragdrop.png"/>
                                    <TextBlock Text="Drag &amp; Drop" FontSize="13" Foreground="#FFA4A4A4" FontWeight="Bold"/>
                                </StackPanel>
                                <StackPanel Grid.Column="0" Grid.Row="1" Margin="10,5,10,10" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" CornerRadius="10,10,10,10" BorderBrush="#FFCDCDCD" BorderThickness="1,1,1,1" AllowDrop="True" >
                                    <TextBlock x:Name="ms2CompareBottom_Scan" Margin="90,7,10,0" FontSize="15" Visibility="Collapsed"/>
                                    <TextBlock x:Name="ms2CompareBottom_Mz" Margin="90,7,10,0" FontSize="15" Visibility="Collapsed"/>
                                    <TextBlock x:Name="ms2CompareBottom_Rt" Margin="90,7,10,0" FontSize="15" Visibility="Collapsed"/>
                                    <TextBlock x:Name="ms2CompareBottom_Polarity" Margin="90,7,10,0" FontSize="15" Visibility="Collapsed"/>
                                </StackPanel>
                                <StackPanel Grid.Column="0" Grid.Row="1" Margin="10,5,10,10" Orientation="Vertical" HorizontalAlignment="Left" VerticalAlignment="Stretch" CornerRadius="10,10,10,10" Background="Gray" Width="80">
                                    <TextBlock Text="Index" Margin="10,10,10,0" FontSize="15" Foreground="White" HorizontalAlignment="Left"/>
                                    <TextBlock Text="m/z" Margin="10,7,10,0" FontSize="15" Foreground="White" HorizontalAlignment="Left" FontStyle="Italic"/>
                                    <TextBlock Text="RT (min)" Margin="10,7,10,0" FontSize="15" Foreground="White" HorizontalAlignment="Left"/>
                                    <TextBlock Text="Polarity" Margin="10,7,10,0" FontSize="15" Foreground="White" HorizontalAlignment="Left"/>
                                </StackPanel>
                                <StackPanel x:Name="ms2ComparePanel_Bottom" Grid.Column="0" Grid.Row="1" Margin="10,5,10,10" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" CornerRadius="10,10,10,10" AllowDrop="True" Background="#00F1F1F1"/>


                                <oxy:PlotView x:Name="MS2ComparePlot" Grid.Column="1" Grid.RowSpan="2" Background="#00F1F1F1" Margin="-10,10,0,-15" HorizontalAlignment="Stretch"/>
                                <Image x:Name="emptyMS2CompareImage" Grid.Column="1" Grid.RowSpan="2" Height="200" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,0,0,0" Source="ms-appx:///Image/ms2compareBIG.png"/>

                                <StackPanel Orientation="Horizontal" Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2" HorizontalAlignment="Center">
                                    <TextBlock Text="Dot Product Score: " Margin="10,10,10,0" FontSize="15" HorizontalAlignment="Left"/>
                                    <TextBlock x:Name="DPscore_ms2compare" Text="" Margin="10,10,10,0" FontSize="15" HorizontalAlignment="Left"/>
                                    <TextBlock Text="Matched Fragment Number: " Margin="30,10,10,0" FontSize="15" HorizontalAlignment="Left"/>
                                    <TextBlock x:Name="matchNum_ms2compare" Text="" Margin="10,10,10,0" FontSize="15" HorizontalAlignment="Left"/>
                                </StackPanel>
                            </Grid>
                        </muxc:TabViewItem.Content>
                    </muxc:TabViewItem>


                    <!--<muxc:TabViewItem Header="Work List" IsClosable="False" IsSelected="False">
                        <muxc:TabViewItem.IconSource>
                            <muxc:BitmapIconSource UriSource="/Image/worklist.png" ShowAsMonochrome="False" />
                        </muxc:TabViewItem.IconSource>
                    </muxc:TabViewItem>
                    <muxc:TabViewItem Header="MS2 Cluster" IsClosable="False" IsSelected="False">
                        <muxc:TabViewItem.IconSource>
                            <muxc:BitmapIconSource UriSource="/Image/ms2cluster.png" ShowAsMonochrome="False" />
                        </muxc:TabViewItem.IconSource>
                    </muxc:TabViewItem>-->


                </muxc:TabView.TabItems>
            </muxc:TabView>

            <controls:GridSplitter
            GripperCursor="Default"
            VerticalAlignment="Bottom"
            Grid.Row="0"
            Grid.Column="0"
            ResizeDirection="Rows"
            ResizeBehavior="CurrentAndNext"
            CursorBehavior="ChangeOnSplitterHover"
            Background="Transparent"
            Height="10" FocusVisualPrimaryBrush="Transparent" GripperForeground="Transparent" Foreground="#FF9288C5" Grid.ColumnSpan="2" >
                <controls:GridSplitter.RenderTransform>
                    <TranslateTransform Y="8" />
                </controls:GridSplitter.RenderTransform>

            </controls:GridSplitter>
            <controls:GridSplitter
            GripperCursor="Default"
            VerticalAlignment="Bottom"
            Grid.Row="1"
            Grid.Column="0"
            ResizeDirection="Rows"
            ResizeBehavior="CurrentAndNext"
            CursorBehavior="ChangeOnSplitterHover"
            Background="Transparent"
            Height="10" FocusVisualPrimaryBrush="Transparent" GripperForeground="Transparent" Foreground="#FF9288C5" Grid.ColumnSpan="2" >
                <controls:GridSplitter.RenderTransform>
                    <TranslateTransform Y="8" />
                </controls:GridSplitter.RenderTransform>

            </controls:GridSplitter>

        </Grid>

        <Grid Grid.Column="1" Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="1*"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="8.25*"/>
                <RowDefinition Height="9.75*"/>
                <RowDefinition Height="10.5*"/>
            </Grid.RowDefinitions>
            <Grid.Resources>
                <ThemeShadow x:Name="SharedShadow" />
            </Grid.Resources>

            <Border Grid.Column ="0" Grid.Row ="0" Background="#FFF1F1F1" BorderThickness="3,3,3,3"  BorderBrush="White"/>
            <Border Grid.Column ="0" Grid.Row ="1" Background="#FFF1F1F1" BorderThickness="3,3,3,3"  BorderBrush="White"/>
            <Border Grid.Column ="0" Grid.Row ="2" Background="#FFF1F1F1" BorderThickness="3,3,3,3"  BorderBrush="White"/>
            <StackPanel Grid.Column="0" Grid.Row="0" HorizontalAlignment="Left" VerticalAlignment="Stretch" Background="#9AB69F" Width="35" BorderThickness="0" BorderBrush="#FFBFBFBF" Margin="3,3,0,3" />
            <StackPanel Grid.Column="0" Grid.Row="1" HorizontalAlignment="Left" VerticalAlignment="Stretch" Background="#9AB69F" Width="35" BorderThickness="0" BorderBrush="#FFBFBFBF" Margin="3,3,0,3" />
            <StackPanel Grid.Column="0" Grid.Row="2" HorizontalAlignment="Left" VerticalAlignment="Stretch" Background="#9AB69F" Width="35" BorderThickness="0" BorderBrush="#FFBFBFBF" Margin="3,3,0,0" />
            <TextBlock Grid.Column="0" Grid.Row="0" Text="Candidate List" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="7,0,0,0" RenderTransformOrigin="0.3,1.42" Foreground="White" FontSize="20">
                <TextBlock.RenderTransform>
                    <CompositeTransform Rotation="-90"/>
                </TextBlock.RenderTransform>
            </TextBlock>
            <TextBlock Grid.Column="0" Grid.Row="1" Text="MS2 Spectrum" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="7,0,0,0" RenderTransformOrigin="0.3,1.5" Foreground="White" FontSize="20">
                <TextBlock.RenderTransform>
                    <CompositeTransform Rotation="-90"/>
                </TextBlock.RenderTransform>
            </TextBlock>
            <TextBlock Grid.Column="0" Grid.Row="2" Text="Result" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="7,0,0,0" RenderTransformOrigin="0.36,0.8" Foreground="White" FontSize="20">
                <TextBlock.RenderTransform>
                    <CompositeTransform Rotation="-90"/>
                </TextBlock.RenderTransform>
            </TextBlock>

            <syncfusion:SfDataGrid x:Name="candidateFormulaGrid" Grid.Column="0" Grid.Row="0" Margin="45,5,175,10 " BorderThickness="0" HeaderRowHeight="30" RowHeight="30"
                       ItemsSource="{Binding Candidates}" CellStyle="{StaticResource fileCellStyle}" HeaderStyle="{StaticResource fileHeaderStyle}"
                       AutoGenerateColumns="False" LiveDataUpdateMode="Default" SelectionUnit="Row" SelectionMode="Single" CurrentCellBorderThickness="0,0,0,0"
                       CurrentCellActivated="candidateFormulaGrid_CurrentCellActivated" AllowResizingColumns="True"  AllowRowHoverHighlighting="True" RowHoverHighlightingBrush="#B2A4ABD6">
                <syncfusion:SfDataGrid.DataContext>
                    <local:CandidateModel/>
                </syncfusion:SfDataGrid.DataContext>

                <syncfusion:SfDataGrid.Columns>
                    <syncfusion:GridNumericColumn MappingName="Rank" HeaderText="Rank" AllowEditing="False" AllowFocus="True" AllowSorting="True" Width="65"
                                           HorizontalHeaderContentAlignment="Center" ColumnSizer="SizeToHeader" TextAlignment="Center" />
                    <syncfusion:GridTextColumn MappingName="Formula" HeaderText="Formula" AllowEditing="False" AllowFocus="True" AllowSorting="True" 
                                           HorizontalHeaderContentAlignment="Center" ColumnSizer="Auto" MinimumWidth="150" TextAlignment="Center"/>
                    <syncfusion:GridNumericColumn MappingName="MzError" AllowEditing="False" AllowFocus="True" AllowSorting="True" Width="90"
                                           HorizontalHeaderContentAlignment="Center" ColumnSizer="SizeToHeader" TextAlignment="Center">
                        <syncfusion:GridNumericColumn.HeaderTemplate>
                            <DataTemplate>
                                <TextBlock Text="Δ ppm" ToolTipService.ToolTip="Mass deviation of the precursor ion (in ppm)"/>
                            </DataTemplate>
                        </syncfusion:GridNumericColumn.HeaderTemplate>
                    </syncfusion:GridNumericColumn>
                    <syncfusion:GridNumericColumn MappingName="ExpFragNum" AllowEditing="False" AllowFocus="True" AllowSorting="True" Width="90"
                                           HorizontalHeaderContentAlignment="Center" ColumnSizer="SizeToHeader" TextAlignment="Center">
                        <syncfusion:GridNumericColumn.HeaderTemplate>
                            <DataTemplate>
                                <TextBlock Text="Exp. No." ToolTipService.ToolTip="Total explained fragment number percentage"/>
                            </DataTemplate>
                        </syncfusion:GridNumericColumn.HeaderTemplate>
                    </syncfusion:GridNumericColumn>
                    <syncfusion:GridNumericColumn MappingName="ExpFragSumInt" AllowEditing="False" AllowFocus="True" AllowSorting="True" 
                                           HorizontalHeaderContentAlignment="Center" Width="90" TextAlignment="Center">
                        <syncfusion:GridNumericColumn.HeaderTemplate>
                            <DataTemplate>
                                <TextBlock Text="Exp. Int." ToolTipService.ToolTip="Total explained fragment intensity percentage"/>
                            </DataTemplate>
                        </syncfusion:GridNumericColumn.HeaderTemplate>
                    </syncfusion:GridNumericColumn>
                    <syncfusion:GridNumericColumn MappingName="EstimatedProbability" AllowEditing="False" AllowFocus="True" AllowSorting="True" 
                                           HorizontalHeaderContentAlignment="Center" Width="90" TextAlignment="Center">
                        <syncfusion:GridNumericColumn.HeaderTemplate>
                            <DataTemplate>
                                <TextBlock Text="Post. P" ToolTipService.ToolTip="Estimated posterior probability for a hit calibrated using Platt scaling"/>
                            </DataTemplate>
                        </syncfusion:GridNumericColumn.HeaderTemplate>
                    </syncfusion:GridNumericColumn>
                    <syncfusion:GridNumericColumn MappingName="EstimatedFDR" AllowEditing="False" AllowFocus="True" AllowSorting="True" 
                                           HorizontalHeaderContentAlignment="Center" ColumnSizer="AutoWithLastColumnFill" TextAlignment="Center">
                        <syncfusion:GridNumericColumn.HeaderTemplate>
                            <DataTemplate>
                                <TextBlock Text="Est. FDR" ToolTipService.ToolTip="Estimated false discovery rate for top N hits"/>
                            </DataTemplate>
                        </syncfusion:GridNumericColumn.HeaderTemplate>
                    </syncfusion:GridNumericColumn>
                </syncfusion:SfDataGrid.Columns>

            </syncfusion:SfDataGrid>
            <StackPanel Grid.Row="0" Grid.Column="0" Orientation="Vertical" Margin="10,8,10,0" Width="155" HorizontalAlignment="Right" VerticalAlignment="Top">
                <TextBlock Text="Databases" FontSize="17" HorizontalAlignment="Center" VerticalAlignment="Top" Margin="0,0,0,0" FontWeight="SemiBold"/>
            </StackPanel>
            <ListView x:Name="relevantDB_listview" Grid.Row="0" Grid.Column="1" Margin="0,35,10,10" SelectionMode="Extended" ItemsSource="{x:Bind candidateDB_list}" Padding="0,10,0,10"
                                  Width="155" HorizontalAlignment="Right" VerticalAlignment="Stretch" IsItemClickEnabled="True" CornerRadius="10,10,10,10" Background="White">
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="50"/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <Image Source="{Binding Icon}" Width="32" Height="32"
                                HorizontalAlignment="Left" VerticalAlignment="Center"/>
                            <TextBlock Text="{Binding Name}" FontSize="14" 
                                Grid.Column="1" VerticalAlignment="Center"/>
                        </Grid>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
            <!--<StackPanel Grid.Column="0" Grid.Row="0" VerticalAlignment="Bottom" HorizontalAlignment="Right" Orientation="Horizontal" Margin="45,10,10,10">
                -->
            <!--<Button Content="Reset" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Height="30" Width="70"
                FontSize="14" CornerRadius="5,5,5,5" Click="SelectAllMs2_Click" Margin="0,0,20,0"/>-->
            <!--
                <Button Content="Reset" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Height="30"  Width="70"
                FontSize="14" CornerRadius="5,5,5,5" Click="CalculateMS2_Click" Margin="0,0,0,0"/>
            </StackPanel>-->

            <oxy:PlotView x:Name="MS2Spectrum" Grid.Column="0" Grid.Row="1" Background="#00F1F1F1" Margin="30,10,165,0">
                <!--<oxy:PlotView.DataContext>
                <local:SpectrumModel/>
            </oxy:PlotView.DataContext>-->
            </oxy:PlotView>
            <TextBlock Grid.Column="0" Grid.Row="1" HorizontalAlignment="Left" VerticalAlignment="Bottom" FontFamily="Segoe MDL2 Assets" Text="&#xE946;" FontSize="22" Foreground="#FF9B9B9B" Margin="45,5,5,5"
                               ToolTipService.ToolTip="Left click on the peak apex to show m/z &amp; abundance. Hold right click to adjust the spectrum axis range. Double click scroll wheel to restore the default view."/>
            <!--<TextBlock Text="Left click on the peak apex to show m/z &amp; abundance. Hold right click to drag the spectrum axis range. " 
                       Grid.Column="0" Grid.Row="1" Margin="0,5,150,25" FontSize="11" Foreground="#FF838383"
                       VerticalAlignment="Bottom" HorizontalAlignment="Center" TextWrapping="Wrap"/>
            <TextBlock Text="Double click the middle mouse button (scroll wheel) to restore the default display." 
                       Grid.Column="0" Grid.Row="1" Margin="0,5,150,10" FontSize="11" Foreground="#FF838383"
                       VerticalAlignment="Bottom" HorizontalAlignment="Center" TextWrapping="Wrap"/>-->
            <ScrollViewer x:Name="mergedMS2DisplayPanel" Grid.Column="0" Grid.Row="1" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="120,25,195,0" CornerRadius="10,10,10,10" Visibility="Collapsed"
                          VerticalScrollBarVisibility="Disabled" IsVerticalRailEnabled="False" HorizontalScrollBarVisibility="Auto">
                <ScrollViewer.Background>
                    <LinearGradientBrush EndPoint="1,1" StartPoint="0,0">
                        <GradientStop Color="#FF878787"/>
                        <GradientStop Color="#FFE6E6E6" Offset="1"/>
                    </LinearGradientBrush>
                </ScrollViewer.Background>
                <StackPanel Orientation="Horizontal">
                    <TextBlock HorizontalAlignment="Left" VerticalAlignment="Top" FontFamily="Segoe MDL2 Assets" Text="&#xE946;" FontSize="22" Foreground="#FFE6E6E6" Margin="10,5,0,5"
                               ToolTipService.ToolTip="This MS2 has been merged"/>
                    <TextBlock Text="MS2 merged from scans: " Margin="10,5,0,0"/>
                    <TextBlock x:Name="mergedMS2IndexDisplay" Text="" Margin="10,5,10,0" FocusVisualPrimaryBrush="#FF4A4B9D"/>
                </StackPanel>
            </ScrollViewer>
            <TextBlock x:Name="seedMetaboliteDisplay" Text="Seed metabolite" Grid.Column="0" Grid.Row="1" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="130,60,195,0" Visibility="Collapsed"
                       FocusVisualPrimaryBrush="#FF4A4B9D" FontSize="18" FontWeight="SemiBold" Foreground="#f06407"/>
            
            <ScrollViewer Grid.Column="0" Grid.Row="1" Margin="10,10,10,10" HorizontalAlignment="Right" VerticalAlignment="Center">
                <StackPanel>
                    <StackPanel Background="White" Width="145" Height="58" CornerRadius="10,10,10,10" >
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="Precursor" Margin="10,5,0,0" FontSize="15" Foreground="#FF838383"/>
                            <TextBlock Text="m/z" Margin="5,5,10,0" FontSize="15" Foreground="#FF838383" FontStyle="Italic"/>
                        </StackPanel>
                        <TextBlock x:Name="ms2SpecBox_mz" Text="000.0000" Margin="10,2,10,0" FontSize="17" FontWeight="Bold" HorizontalAlignment="Center" />
                    </StackPanel>
                    <StackPanel Background="White" Width="145" Height="58" CornerRadius="10,10,10,10" Margin="0,10,0,0" >
                        <TextBlock Text="Retention Time" Margin="10,5,10,0" FontSize="15" Foreground="#FF838383"/>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                            <TextBlock x:Name="ms2SpecBox_rt" Text="00.0" Margin="10,2,0,0" FontSize="17" FontWeight="Bold" HorizontalAlignment="Center"/>
                            <TextBlock Text="min" Margin="5,2,10,0" FontSize="17" HorizontalAlignment="Center"/>
                        </StackPanel>
                    </StackPanel>
                    <StackPanel Background="White" Width="145" Height="58" CornerRadius="10,10,10,10" Margin="0,10,0,0">
                        <StackPanel  Orientation="Horizontal">
                            <TextBlock Text="Base Peak" Margin="10,5,0,0" FontSize="15" Foreground="#FF838383" ToolTipService.ToolTip="Base peak: peak with the highest intensity"/>
                            <TextBlock Text="m/z" Margin="5,5,10,0" FontSize="15" Foreground="#FF838383" FontStyle="Italic"/>
                        </StackPanel>
                        <TextBlock x:Name="ms2SpecBox_bpmz" Text="000.0000" Margin="10,2,10,0" FontSize="17" FontWeight="Bold" HorizontalAlignment="Center" />
                    </StackPanel>
                    <StackPanel Background="White" Width="145" Height="58" CornerRadius="10,10,10,10" Margin="0,10,0,0" >
                        <TextBlock Text="Base Peak Intensity" Margin="10,5,10,0" FontSize="15" Foreground="#FF838383" ToolTipService.ToolTip="Base peak: peak with the highest intensity"/>
                        <TextBlock x:Name="ms2SpecBox_bpint" Text="0000" Margin="10,2,10,0" FontSize="17" FontWeight="Bold" HorizontalAlignment="Center"/>
                    </StackPanel>
                    <StackPanel Background="White" Width="145" Height="58" CornerRadius="10,10,10,10" Margin="0,10,0,0" >
                        <TextBlock Text="Total Fragment #" Margin="10,5,10,0" FontSize="15" Foreground="#FF838383" ToolTipService.ToolTip="Total fragment ion number in this MS2"/>
                        <TextBlock x:Name="ms2SpecBox_fragNum" Text="00" Margin="10,2,10,0" FontSize="17" FontWeight="Bold" HorizontalAlignment="Center"/>
                    </StackPanel>
                </StackPanel>
            </ScrollViewer>


            <muxc:TabView Grid.Column="0" Grid.Row="2" Margin="40,0,10,0" IsAddTabButtonVisible="False" TabWidthMode="SizeToContent" VerticalAlignment="Stretch" Grid.ColumnSpan="2">
                <muxc:TabView.TabItems>
                    <muxc:TabViewItem x:Name="ms2LibSearch_tabView"  Header="MS2 Library Search" IsClosable="False" IsSelected="True">
						<muxc:TabViewItem.IconSource>
							<muxc:BitmapIconSource UriSource="/Image/ms2LibrarySearch.png" ShowAsMonochrome="False" />
						</muxc:TabViewItem.IconSource>
						<muxc:TabViewItem.Content>

							<Grid VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Margin="0,0,0,0">
								<Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="1*"/>
                                    <ColumnDefinition Width="2*"/>
                                </Grid.ColumnDefinitions>

                                <Grid Grid.Column="0">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="2.2*"/>
                                        <RowDefinition Height="1*"/>
                                    </Grid.RowDefinitions>
                                    <!--<StackPanel Grid.Column="0" Grid.RowSpan="2" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Margin="10,10,3,5" Background="White" CornerRadius="5,5,5,5"/>-->
                      
                                    <oxy:PlotView x:Name="MS2LibSearch_ComparePlot"  Grid.Row="0" Background="#00F1F1F1" Margin="-12,10,0,-10" HorizontalAlignment="Stretch"  VerticalAlignment="Stretch"/>
                                    <StackPanel Grid.Row="1">
                                        <TextBlock Text="MS2 similarity score" Margin="10,5,0,0" FontSize="14" FontWeight="SemiBold" Foreground="#FF838383"/>
                                        <TextBlock x:Name="ms2LibSearch_ms2Score" HorizontalAlignment="Right" Margin="0,0,60,0" FontSize="14" Text="" />
                                        <TextBlock Text="Matched fragment count" Margin="10,5,0,0" FontSize="14" FontWeight="SemiBold" Foreground="#FF838383"/>
                                        <TextBlock x:Name="ms2LibSearch_ms2matchedFragNo" Margin="0,0,60,0" FontSize="14" Text="" HorizontalAlignment="Right"/>
                                        
                                        <!--<TextBlock Text="Matching algorithm" Margin="10,0,0,0" FontSize="14" FontWeight="SemiBold" Foreground="#FF838383"/>
                                        <TextBlock x:Name="ms2LibSearch_matchingAlgorithm" Margin="0,0,20,0" FontSize="14" Text="" HorizontalAlignment="Right"/>-->
                                    </StackPanel>
                                </Grid>

                                <Grid Grid.Column="1" Margin="0,0,0,0">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="3*"/>
                                        <RowDefinition Height="2*"/>
                                    </Grid.RowDefinitions>
                                    <Grid Grid.Row="0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="220"/>
                                            <ColumnDefinition Width="1*"/>
                                        </Grid.ColumnDefinitions>
                                        <Image x:Name="metaIdenImage" Grid.Column="0" Width="220" HorizontalAlignment="Left"/>
                                        <StackPanel Grid.Column="1" Orientation="Horizontal" Margin="0,0,0,2">
                                            <ScrollViewer  VerticalScrollBarVisibility="Visible" Margin="3,0,0,0" HorizontalAlignment= "Stretch" HorizontalScrollMode="Enabled" HorizontalScrollBarVisibility="Hidden">
                                                <StackPanel Orientation="Vertical"  VerticalAlignment="Top" HorizontalAlignment="Stretch">
                                                    <TextBlock Text="Chemical name" Margin="3,0,10,0" FontSize="14" FontWeight="SemiBold" Foreground="#FF838383"/>
                                                    <TextBox x:Name="metaIdenName" Text="" TextWrapping="Wrap" Margin="10,0,10,0" MaxWidth="275"
                                                     Background="Transparent" BorderThickness="0" IsReadOnly="True" FontSize="14" HorizontalAlignment="Center"/>
                                                    <TextBlock Text="Molecular formula" Margin="3,0,10,0" FontSize="14" FontWeight="SemiBold" Foreground="#FF838383" />
                                                    <TextBox x:Name="metaIdenFormula" Text=""  TextWrapping="Wrap" Margin="10,0,10,0" MaxWidth="275"
                                                       Background="Transparent" BorderThickness="0" IsReadOnly="True" FontSize="14" HorizontalAlignment="Center"/>
                                                    <TextBlock Text="InChIKey" Margin="3,0,10,0" FontSize="14" FontWeight="SemiBold" Foreground="#FF838383" />
                                                    <TextBox x:Name="metaIdenInchikey" Text=""  TextWrapping="Wrap" Margin="10,0,10,0" MaxWidth="275"
                                                       Background="Transparent" BorderThickness="0" IsReadOnly="True" FontSize="14" HorizontalAlignment="Center"/>
                                                    <TextBlock Text="PubChem CID" Margin="3,0,10,0" FontSize="14" FontWeight="SemiBold" Foreground="#FF838383" />
                                                    <TextBox x:Name="metaIdenPubChemCID" Text=""  TextWrapping="Wrap" Margin="10,0,10,0" MaxWidth="275"
                                                       Background="Transparent" BorderThickness="0" IsReadOnly="True" FontSize="14" HorizontalAlignment="Center"/>
                                                    <TextBlock Text="Collision energy" Margin="3,0,10,0" FontSize="14" FontWeight="SemiBold" Foreground="#FF838383" />
                                                    <TextBox x:Name="metaIdenCollisionEnergy" Text=""  TextWrapping="Wrap" Margin="10,0,10,0" MaxWidth="275"
                                                       Background="Transparent" BorderThickness="0" IsReadOnly="True" FontSize="14" HorizontalAlignment="Center"/>
                                                    <TextBlock Text="DB #" Margin="3,0,10,0" FontSize="14" FontWeight="SemiBold" Foreground="#FF838383" />
                                                    <TextBox x:Name="metaIdenDBNo" Text=""  TextWrapping="Wrap" Margin="10,0,10,0" MaxWidth="275"
                                                       Background="Transparent" BorderThickness="0" IsReadOnly="True" FontSize="14" HorizontalAlignment="Center"/>
                                                    <TextBlock Text="Comments" Margin="3,0,10,0" FontSize="14" FontWeight="SemiBold" Foreground="#FF838383" />
                                                    <TextBox x:Name="metaIdenComments" Text=""  TextWrapping="Wrap" Margin="10,0,10,0" MaxWidth="275"
                                                       Background="Transparent" BorderThickness="0" IsReadOnly="True" FontSize="14" HorizontalAlignment="Center"/>
                                                    <TextBlock Text="RT (min)" Margin="3,0,10,0" FontSize="14" FontWeight="SemiBold" Foreground="#FF838383" />
                                                    <TextBox x:Name="metaIdenRT" Text=""  TextWrapping="Wrap" Margin="10,0,10,0" MaxWidth="275"
                                                       Background="Transparent" BorderThickness="0" IsReadOnly="True" FontSize="14" HorizontalAlignment="Center"/>
                                                </StackPanel>
                                            </ScrollViewer>

                                        </StackPanel>
                                    </Grid>
                                    <Grid Grid.Row="1" >
                                        <StackPanel Margin="5,5,5,0" BorderBrush="#FFA4ABD6" BorderThickness="1" MaxHeight="2" HorizontalAlignment="Stretch" VerticalAlignment="Top"/>
                                        <ScrollViewer VerticalScrollBarVisibility="Visible" Margin="0,8,0,0">
                                            <StackPanel Orientation="Vertical" >
                                                <TextBlock Text="Description" Margin="5,5,10,0" FontSize="13" FontWeight="SemiBold" Foreground="#FF838383"/>
                                                <TextBox x:Name="metaIdenDescription" Text="" TextWrapping="Wrap" Margin="8,0,5,0" 
                                                     Background="Transparent" BorderThickness="0" IsReadOnly="True" FontSize="13" HorizontalAlignment="Center"/>
                                            </StackPanel>
                                        </ScrollViewer>
                                    </Grid>
                                </Grid>
                            </Grid>
                        </muxc:TabViewItem.Content>
					</muxc:TabViewItem>

                    <muxc:TabViewItem x:Name="featureConnection_tabView"  Header="Feature Connection" IsClosable="False" IsSelected="True">
                        <muxc:TabViewItem.IconSource>
                            <muxc:BitmapIconSource UriSource="/Image/network.png" ShowAsMonochrome="False" />
                        </muxc:TabViewItem.IconSource>
                        <muxc:TabViewItem.Content>

                            <Grid VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Margin="0,10,0,0">
                                <!--<Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="1*"/>
                                    <ColumnDefinition Width="2*"/>
                                </Grid.ColumnDefinitions>-->
                                <StackPanel>
                                    <TextBlock Text="The following table lists the connected metabolic features (only available when applying experiment-specific global annotation)." 
                                           Margin="5,0,0,0" FontSize="13" FontWeight="SemiBold" Foreground="#FF838383" TextWrapping="Wrap"/>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="Formula: " Margin="40,5,0,0" FontSize="14"/>
                                        <TextBlock x:Name="featureConnectionThisFormula" Text="" Margin="15,5,0,0" FontSize="14" FontWeight="SemiBold"/>
                                        <TextBlock Text="RT: " Margin="40,5,0,0" FontSize="14"/>
                                        <TextBlock x:Name="featureConnectionThisRT" Text="" Margin="15,5,0,0" FontSize="14" FontWeight="SemiBold"/>
                                        <TextBlock Text="min" Margin="8,5,0,0" FontSize="14"/>
                                    </StackPanel>
                                </StackPanel>
                                <syncfusion:SfDataGrid x:Name="featureConnectionGrid"  Margin="5,65,5,5 " BorderThickness="0" HeaderRowHeight="30" RowHeight="35"
                       ItemsSource="{Binding Connections}" CellStyle="{StaticResource fileCellStyleB}" HeaderStyle="{StaticResource fileHeaderStyleB}"
                       AutoGenerateColumns="False" LiveDataUpdateMode="Default" SelectionUnit="Row" SelectionMode="Single" CurrentCellBorderThickness="0,0,0,0"
                       AllowResizingColumns="True"  AllowRowHoverHighlighting="True" RowHoverHighlightingBrush="#B2A4ABD6">
                                    <syncfusion:SfDataGrid.DataContext>
                                        <local:FeatureConnectionModel/>
                                    </syncfusion:SfDataGrid.DataContext>

                                    <syncfusion:SfDataGrid.Columns>
                                        <syncfusion:GridNumericColumn MappingName="PairedMs2ScanNumber" AllowEditing="False" AllowFocus="True" AllowSorting="True" Width="85"
                                           HorizontalHeaderContentAlignment="Center" ColumnSizer="SizeToHeader" TextAlignment="Center" UseBindingValue="true">
                                            <syncfusion:GridNumericColumn.HeaderTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="Feature idx." ToolTipService.ToolTip="Feature index of the connected feature."/>
                                                </DataTemplate>
                                            </syncfusion:GridNumericColumn.HeaderTemplate>
                                        </syncfusion:GridNumericColumn>
                                        <syncfusion:GridNumericColumn MappingName="PairedMs2RT" AllowEditing="False" AllowFocus="True" AllowSorting="True" Width="45"
                                           HorizontalHeaderContentAlignment="Center" ColumnSizer="Auto" TextAlignment="Center" UseBindingValue="true">
                                            <syncfusion:GridNumericColumn.HeaderTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="RT" ToolTipService.ToolTip="Retention time of the connected feature."/>
                                                </DataTemplate>
                                            </syncfusion:GridNumericColumn.HeaderTemplate>
                                        </syncfusion:GridNumericColumn>
                                        <syncfusion:GridTextColumn MappingName="PairedMs2MetaboliteName" AllowEditing="False" AllowFocus="True" AllowSorting="True" MinimumWidth="85"
                                           HorizontalHeaderContentAlignment="Center" ColumnSizer="SizeToHeader" TextAlignment="Center" UseBindingValue="true">
                                            <syncfusion:GridTextColumn.HeaderTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="Metabolite" ToolTipService.ToolTip="Metabolite name of the connected feature if it is a seed metabolite."/>
                                                </DataTemplate>
                                            </syncfusion:GridTextColumn.HeaderTemplate>
                                        </syncfusion:GridTextColumn>
                                        <syncfusion:GridTextColumn MappingName="PairedMs2Formula" AllowEditing="False" AllowFocus="True" AllowSorting="True"
                                           HorizontalHeaderContentAlignment="Center" ColumnSizer="Auto" MinimumWidth="105"  TextAlignment="Center" UseBindingValue="true">
                                            <syncfusion:GridTextColumn.HeaderTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="Formula" ToolTipService.ToolTip="Molecular formula of the connected feature."/>
                                                </DataTemplate>
                                            </syncfusion:GridTextColumn.HeaderTemplate>
                                        </syncfusion:GridTextColumn>
                                        <syncfusion:GridTextColumn MappingName="ConnectionType" AllowEditing="False" AllowFocus="True" AllowSorting="True" 
                                           HorizontalHeaderContentAlignment="Center" Width="85" ColumnSizer="Auto" TextAlignment="Center" UseBindingValue="true">
                                            <syncfusion:GridTextColumn.HeaderTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="Conn. type" ToolTipService.ToolTip="Connection type: biochemical or abiotic"/>
                                                </DataTemplate>
                                            </syncfusion:GridTextColumn.HeaderTemplate>
                                        </syncfusion:GridTextColumn>
                                        <syncfusion:GridNumericColumn MappingName="ms2Similarity" AllowEditing="False" AllowFocus="True" AllowSorting="True" Width="60"
                                           HorizontalHeaderContentAlignment="Center" TextAlignment="Center" ColumnSizer="Auto" UseBindingValue="true">
                                            <syncfusion:GridNumericColumn.HeaderTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="MS2 sim." ToolTipService.ToolTip="MS2 similarity score between two features (GNPS MS2 matching algorithm)."/>
                                                </DataTemplate>
                                            </syncfusion:GridNumericColumn.HeaderTemplate>
                                        </syncfusion:GridNumericColumn>
                                        <syncfusion:GridTextColumn MappingName="FormulaChange" AllowEditing="False" AllowFocus="True" AllowSorting="True" MinimumWidth="75"
                                           HorizontalHeaderContentAlignment="Center" TextAlignment="Center" UseBindingValue="true">
                                            <syncfusion:GridTextColumn.HeaderTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="Δ Formula" ToolTipService.ToolTip="Formula difference between two features."/>
                                                </DataTemplate>
                                            </syncfusion:GridTextColumn.HeaderTemplate>
                                        </syncfusion:GridTextColumn>
                                        <syncfusion:GridTextColumn MappingName="Description" AllowEditing="False" AllowFocus="True" AllowSorting="True" 
                                           HorizontalHeaderContentAlignment="Center" ColumnSizer="AutoWithLastColumnFill" TextAlignment="Center" UseBindingValue="true">
                                            <syncfusion:GridTextColumn.HeaderTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="Description" ToolTipService.ToolTip="Connection description."/>
                                                </DataTemplate>
                                            </syncfusion:GridTextColumn.HeaderTemplate>
                                        </syncfusion:GridTextColumn>
                                    </syncfusion:SfDataGrid.Columns>

                                </syncfusion:SfDataGrid>

                            </Grid>
                        </muxc:TabViewItem.Content>
                    </muxc:TabViewItem>

                    <muxc:TabViewItem x:Name="ms2ExplainSummary_tabView" Header="MS2 Explanation Summary" IsClosable="False" IsSelected="False" >
                        <muxc:TabViewItem.IconSource>
                            <muxc:BitmapIconSource UriSource="/Image/ms2summary.png" ShowAsMonochrome="False" />
                        </muxc:TabViewItem.IconSource>
                        <muxc:TabViewItem.Content>

                            <Grid VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Margin="0,0,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="1*"/>
                                    <ColumnDefinition Width="1*"/>
                                    <ColumnDefinition Width="1*"/>
                                    <ColumnDefinition Width="200"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="1*"/>
                                    <RowDefinition Height="1*"/>
                                </Grid.RowDefinitions>

                                <StackPanel Grid.Column="0" Grid.Row="0" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Margin="10,10,3,5" Background="White" CornerRadius="10,10,10,10" />
                                <StackPanel Grid.Column="0" Grid.Row="2" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Margin="10,5,3,10" Background="White" CornerRadius="10,10,10,10" />
                                <StackPanel Grid.Column="1" Grid.Row="0" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Margin="5,10,3,5" Background="White" CornerRadius="10,10,10,10" />
                                <StackPanel Grid.Column="1" Grid.Row="2" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Margin="5,5,3,10" Background="White" CornerRadius="10,10,10,10" />
                                <StackPanel Grid.Column="2" Grid.Row="0" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Margin="5,10,3,5" Background="White" CornerRadius="10,10,10,10" />
                                <StackPanel Grid.Column="2" Grid.Row="2" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Margin="5,5,3,10" Background="White" CornerRadius="10,10,10,10" />

                                <sfchart:SfChart Grid.Column="0" Grid.Row="0" Margin="5,8,5,4" HorizontalAlignment="Left" Header="Fragment DBE" FontSize="12" ToolTipService.ToolTip="DBE: double bond equivalent">

                                    <sfchart:SfChart.PrimaryAxis>
                                        <sfchart:NumericalAxis TickLineSize="2" FontSize="8" ShowGridLines="False" PlotOffset="5">
                                        </sfchart:NumericalAxis>
                                    </sfchart:SfChart.PrimaryAxis>
                                    <sfchart:SfChart.SecondaryAxis>
                                        <sfchart:NumericalAxis Interval="1" TickLineSize="2" FontSize="10" Header="Frequency" ShowGridLines="False"/>
                                    </sfchart:SfChart.SecondaryAxis>

                                    <sfchart:HistogramSeries x:Name="fragDBEhistogram" 
                                             SortBy="X" 
                                             IsSortData="True" 
                                             HistogramInterval="0.5" 
                                             Interior="#B7E0FF" 
                                             XBindingPath="dbe_f"
                                             YBindingPath="frequency"
                                             ShowNormalDistributionCurve="False"
                                             >
                                    </sfchart:HistogramSeries>
                                </sfchart:SfChart>
                                <sfchart:SfChart Grid.Column="0" Grid.Row="1" Margin="5,8,5,7" HorizontalAlignment="Left" Header="NL DBE" FontSize="12" ToolTipService.ToolTip="DBE: double bond equivalent">

                                    <sfchart:SfChart.PrimaryAxis>
                                        <sfchart:NumericalAxis TickLineSize="2" FontSize="8" ShowGridLines="False" PlotOffset="5">
                                        </sfchart:NumericalAxis>
                                    </sfchart:SfChart.PrimaryAxis>
                                    <sfchart:SfChart.SecondaryAxis>
                                        <sfchart:NumericalAxis Interval="1" TickLineSize="2" FontSize="10" Header="Frequency" ShowGridLines="False"/>
                                    </sfchart:SfChart.SecondaryAxis>

                                    <sfchart:HistogramSeries x:Name="nlDBEhistogram" 
                                             SortBy="X" 
                                             IsSortData="True" 
                                             HistogramInterval="0.5" 
                                             Interior="#B7E0FF" 
                                             XBindingPath="dbe_l"
                                             YBindingPath="frequency"
                                             ShowNormalDistributionCurve="False"
                                             >
                                    </sfchart:HistogramSeries>
                                </sfchart:SfChart>
                                <sfchart:SfChart Grid.Column="1" Grid.Row="0" Margin="5,8,5,4" HorizontalAlignment="Left" Header="Fragment H/C ratio" FontSize="12" ToolTipService.ToolTip="Hydrogen number / Carbon number">
                                    <sfchart:SfChart.PrimaryAxis>
                                        <sfchart:NumericalAxis TickLineSize="2" FontSize="8" ShowGridLines="False" PlotOffset="5">
                                        </sfchart:NumericalAxis>
                                    </sfchart:SfChart.PrimaryAxis>
                                    <sfchart:SfChart.SecondaryAxis>
                                        <sfchart:NumericalAxis Interval="1" TickLineSize="2" FontSize="10" Header="Frequency" ShowGridLines="False"/>
                                    </sfchart:SfChart.SecondaryAxis>

                                    <sfchart:HistogramSeries x:Name="fragH2Chistogram" 
                                             SortBy="X" 
                                             IsSortData="True" 
                                             HistogramInterval="0.5" 
                                             Interior="#CFEADC" 
                                             XBindingPath="h2c_f"
                                             YBindingPath="frequency"
                                             ShowNormalDistributionCurve="False"
                                             >
                                    </sfchart:HistogramSeries>
                                </sfchart:SfChart>
                                <sfchart:SfChart Grid.Column="1" Grid.Row="1" Margin="5,8,5,7" HorizontalAlignment="Left" Header="NL H/C ratio" FontSize="12" ToolTipService.ToolTip="Hydrogen number / Carbon number">

                                    <sfchart:SfChart.PrimaryAxis>
                                        <sfchart:NumericalAxis TickLineSize="2" FontSize="8" ShowGridLines="False" PlotOffset="5">
                                        </sfchart:NumericalAxis>
                                    </sfchart:SfChart.PrimaryAxis>
                                    <sfchart:SfChart.SecondaryAxis>
                                        <sfchart:NumericalAxis Interval="1" TickLineSize="2" FontSize="10" Header="Frequency" ShowGridLines="False"/>
                                    </sfchart:SfChart.SecondaryAxis>

                                    <sfchart:HistogramSeries x:Name="nlH2Chistogram" 
                                             SortBy="X" 
                                             IsSortData="True" 
                                             HistogramInterval="0.5" 
                                             Interior="#CFEADC" 
                                             XBindingPath="h2c_l"
                                             YBindingPath="frequency"
                                             ShowNormalDistributionCurve="False"
                                             >
                                    </sfchart:HistogramSeries>
                                </sfchart:SfChart>
                                <sfchart:SfChart Grid.Column="2" Grid.Row="0" Margin="5,8,5,4" HorizontalAlignment="Left" Header="Fragment Heteroatom/C" FontSize="12" ToolTipService.ToolTip="Heteroatom number / Carbon number">

                                    <sfchart:SfChart.PrimaryAxis>
                                        <sfchart:NumericalAxis TickLineSize="2" FontSize="8" ShowGridLines="False" PlotOffset="5">
                                        </sfchart:NumericalAxis>
                                    </sfchart:SfChart.PrimaryAxis>
                                    <sfchart:SfChart.SecondaryAxis>
                                        <sfchart:NumericalAxis Interval="1" TickLineSize="2" FontSize="10" Header="Frequency" ShowGridLines="False"/>
                                    </sfchart:SfChart.SecondaryAxis>

                                    <sfchart:HistogramSeries x:Name="fragHetero2Chistogram" 
                                             SortBy="X" 
                                             IsSortData="True" 
                                             HistogramInterval="0.5" 
                                             Interior="#FBEDCA" 
                                             XBindingPath="hetero2c_f"
                                             YBindingPath="frequency"
                                             ShowNormalDistributionCurve="False"
                                             >
                                    </sfchart:HistogramSeries>
                                </sfchart:SfChart>
                                <sfchart:SfChart Grid.Column="2" Grid.Row="1" Margin="5,8,5,7" HorizontalAlignment="Left" Header="NL Heteroatom/C" FontSize="12" ToolTipService.ToolTip="Heteroatom number / Carbon number">

                                    <sfchart:SfChart.PrimaryAxis>
                                        <sfchart:NumericalAxis TickLineSize="2" FontSize="8" ShowGridLines="False" PlotOffset="5">
                                        </sfchart:NumericalAxis>
                                    </sfchart:SfChart.PrimaryAxis>
                                    <sfchart:SfChart.SecondaryAxis>
                                        <sfchart:NumericalAxis Interval="1" TickLineSize="2" FontSize="10" Header="Frequency" ShowGridLines="False"/>
                                    </sfchart:SfChart.SecondaryAxis>

                                    <sfchart:HistogramSeries x:Name="nlHetero2Chistogram" 
                                             SortBy="X" 
                                             IsSortData="True" 
                                             HistogramInterval="0.5" 
                                             Interior="#FBEDCA" 
                                             XBindingPath="hetero2c_l"
                                             YBindingPath="frequency"
                                             ShowNormalDistributionCurve="False"
                                             >
                                    </sfchart:HistogramSeries>
                                </sfchart:SfChart>

                                <StackPanel Grid.Column="3" Grid.Row="0" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Margin="0,0,0,7" Grid.RowSpan="2"
                                            Width="190" Background="White" CornerRadius="10,10,10,10" Orientation="Vertical">
                                </StackPanel>
                                <sfchart:SfChart Grid.Column="3" Grid.Row="0" Grid.RowSpan="2" Margin="10,10,10,70" HorizontalAlignment="Center" Width="190" FontSize="12">
                                    <sfchart:SfChart.DataContext>
                                        <local:RadicalIonRatioModel/>
                                    </sfchart:SfChart.DataContext>
                                    <sfchart:SfChart.SecondaryAxis>
                                        <sfchart:NumericalAxis Visibility="Collapsed">
                                        </sfchart:NumericalAxis>
                                    </sfchart:SfChart.SecondaryAxis>

                                    <sfchart:StackingBar100Series x:Name="radicalIonPlot" Interior="#4A4A4A" XBindingPath="Type" YBindingPath="Radical" SegmentSpacing="0.1" ShowTooltip="True"/>
                                    <sfchart:StackingBar100Series x:Name="nonRadicalIonPlot" Interior="#7F7F7F" XBindingPath="Type" YBindingPath="NonRadical" SegmentSpacing="0.1" ShowTooltip="True"/>
                                </sfchart:SfChart>
                                <StackPanel Grid.Column="3" Grid.Row="0" Grid.RowSpan="2" VerticalAlignment="Bottom" HorizontalAlignment="Stretch" Margin="0,0,0,10" Width="190" CornerRadius="10,10,10,10" Orientation="Vertical">
                                    <StackPanel Orientation="Horizontal" Margin="10,0,10,0">
                                        <Rectangle Width="20" Height="10" Fill="#4A4A4A" VerticalAlignment ="Center" HorizontalAlignment="Center"/>
                                        <TextBlock Text="Radical Fragment Ion" FontSize="12" VerticalAlignment="Center" Margin="6,0,10,0"/>
                                    </StackPanel>
                                    <StackPanel Orientation="Horizontal" Margin="10,2,10,0">
                                        <Rectangle Width="20" Height="10" Fill="#7F7F7F" VerticalAlignment ="Center" HorizontalAlignment="Center"/>
                                        <TextBlock Text="Non-radical Fragment Ion" FontSize="12" VerticalAlignment="Center" Margin="6,2,10,0"/>
                                    </StackPanel>
                                    <TextBlock Text="Ion Intensity" FontSize="14" VerticalAlignment="Center" Margin="10,10,10,0" FontStyle="Italic"/>
                                    <StackPanel Orientation="Horizontal" Margin="10,0,10,0">
                                        <TextBlock Text="Radical:" FontSize="12" VerticalAlignment="Center" Margin="0,0,0,0"/>
                                        <TextBlock x:Name="radicalIonInt_box" Text="" FontSize="12" VerticalAlignment="Center" Margin="3,0,5,0"/>
                                        <TextBlock Text="Non-radical:" FontSize="12" VerticalAlignment="Center" Margin="5,0,0,0"/>
                                        <TextBlock x:Name="nonradicalIonInt_box" Text="" FontSize="12" VerticalAlignment="Center" Margin="3,0,5,0"/>
                                    </StackPanel>
                                    <TextBlock Text="Ion Count" FontSize="14" VerticalAlignment="Center" Margin="10,5,10,0" FontStyle="Italic"/>
                                    <StackPanel Orientation="Horizontal" Margin="10,0,10,0">
                                        <TextBlock Text="Radical:" FontSize="12" VerticalAlignment="Center" Margin="0,0,0,0"/>
                                        <TextBlock x:Name="radicalIonCt_box" Text="" FontSize="12" VerticalAlignment="Center" Margin="3,0,5,0"/>
                                        <TextBlock Text="Non-radical:" FontSize="12" VerticalAlignment="Center" Margin="5,0,0,0"/>
                                        <TextBlock x:Name="nonradicalIonCt_box" Text="" FontSize="12" VerticalAlignment="Center" Margin="3,0,5,0"/>
                                    </StackPanel>
                                </StackPanel>

                            </Grid>

                        </muxc:TabViewItem.Content>
                    </muxc:TabViewItem>
                    
                    
                </muxc:TabView.TabItems>
            </muxc:TabView>




            <controls:GridSplitter
            GripperCursor="Default"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Bottom"
            Grid.Row="0"
            Grid.Column="0"
            ResizeDirection="Rows"
            ResizeBehavior="CurrentAndNext"
            CursorBehavior="ChangeOnSplitterHover"
            Background="Transparent"
            Height="10" FocusVisualPrimaryBrush="Transparent" GripperForeground="Transparent" Foreground="#FF9288C5" >
                <controls:GridSplitter.RenderTransform>
                    <TranslateTransform Y="8" />
                </controls:GridSplitter.RenderTransform>

            </controls:GridSplitter>
            <controls:GridSplitter
            GripperCursor="Default"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Bottom"
            Grid.Row="1"
            Grid.Column="0"
            ResizeDirection="Rows"
            ResizeBehavior="CurrentAndNext"
            CursorBehavior="ChangeOnSplitterHover"
            Background="Transparent"
            Height="10" FocusVisualPrimaryBrush="Transparent" GripperForeground="Transparent" Foreground="#FF9288C5" >
                <controls:GridSplitter.RenderTransform>
                    <TranslateTransform Y="8" />
                </controls:GridSplitter.RenderTransform>

            </controls:GridSplitter>

        </Grid>

        <Grid Grid.Column="2" Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="1*"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="2.2*"/>
                <RowDefinition Height="1*"/>
            </Grid.RowDefinitions>
            <Border Grid.Column ="0" Grid.Row ="0" Background="#FFFAFAFA" BorderThickness="3,3,0,3"  BorderBrush="White"/>
            <Border Grid.Column ="0" Grid.Row ="1" Background="#FFFAFAFA" BorderThickness="3,3,0,3"  BorderBrush="White"/>
            <StackPanel Grid.Column="0" Grid.Row="0" HorizontalAlignment="Left" VerticalAlignment="Stretch" Background="#D7B29E" Width="35" BorderThickness="0" BorderBrush="#FFBFBFBF" Margin="3,3,0,3" />
            <StackPanel Grid.Column="0" Grid.Row="1" HorizontalAlignment="Left" VerticalAlignment="Stretch" Background="#D7B29E" Width="35" BorderThickness="0" BorderBrush="#FFBFBFBF" Margin="3,3,0,0" />
            <TextBlock Grid.Column="0" Grid.Row="0" Text="MS2 Fragment Table" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="-1.5,0,0,0" RenderTransformOrigin="0.24,1.3" Foreground="White" FontSize="20">
                <TextBlock.RenderTransform>
                    <CompositeTransform Rotation="-90"/>
                </TextBlock.RenderTransform>
            </TextBlock>
            <TextBlock Grid.Column="0" Grid.Row="1" Text="MS1 Isotope Matching" VerticalAlignment="Center" HorizontalAlignment="Left" RenderTransformOrigin="0.3,1.5" Foreground="White" FontSize="20" UseLayoutRounding="False" d:LayoutRounding="Auto" Margin="-12,0,0,0">
                <TextBlock.RenderTransform>
                    <CompositeTransform Rotation="-90"/>
                </TextBlock.RenderTransform>
            </TextBlock>

            <StackPanel Grid.Column="0" Grid.Row="0" Margin="90,5,10,10" HorizontalAlignment="Stretch" VerticalAlignment="Top" CornerRadius="10,10,10,10" Background="White" Height="30" BorderBrush="#FFCDCDCD" BorderThickness="1,1,1,1">
                <TextBlock x:Name="ms2FragBox_filename" Text="" Margin="30,3,5,0" FontSize="15"/>
            </StackPanel>
            <StackPanel Grid.Column="0" Grid.Row="0" Margin="45,5,10,10" HorizontalAlignment="Left" VerticalAlignment="Top" CornerRadius="10,10,10,10" Background="Gray" Height="30" Width="70">
                <TextBlock Text="File" Margin="10,4,10,0" FontSize="15" Foreground="White" HorizontalAlignment="Center" HorizontalTextAlignment="Center" CharacterSpacing="40"/>
            </StackPanel>
            <Grid Grid.Column="0" Grid.Row="0" Margin="45,40,10,10" VerticalAlignment="Top">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2*"/>
                    <ColumnDefinition Width="3*"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Grid.Row="0" Margin="45,0,5,0" HorizontalAlignment="Stretch" VerticalAlignment="Top" CornerRadius="10,10,10,10" Background="White" Height="30" BorderBrush="#FFCDCDCD" BorderThickness="1,1,1,1">
                    <TextBlock x:Name="ms2FragBox_scanNum" Text="" Margin="30,3,5,0" FontSize="15"/>
                </StackPanel>
                <StackPanel Grid.Column="0" Grid.Row="0" Margin="0,0,0,0" HorizontalAlignment="Left" VerticalAlignment="Top" CornerRadius="10,10,10,10" Background="Gray" Height="30" Width="70">
                    <TextBlock Text="Index" Margin="10,4,10,0" FontSize="15" Foreground="White" HorizontalAlignment="Center"/>
                </StackPanel>

                <StackPanel Grid.Column="1" Grid.Row="0" Margin="45,0,0,0" HorizontalAlignment="Stretch" VerticalAlignment="Top" CornerRadius="10,10,10,10" Background="White" Height="30" BorderBrush="#FFCDCDCD" BorderThickness="1,1,1,1">
                    <TextBlock x:Name="ms2FragBox_adduct" Text="" Margin="30,3,5,0" FontSize="15"/>
                </StackPanel>
                <StackPanel Grid.Column="1" Grid.Row="0" Margin="0,0,0,0" HorizontalAlignment="Left" VerticalAlignment="Top" CornerRadius="10,10,10,10" Background="Gray" Height="30" Width="70">
                    <TextBlock Text="Adduct" Margin="10,4,10,0" FontSize="15" Foreground="White" HorizontalAlignment="Center"/>
                </StackPanel>
            </Grid>

            <syncfusion:SfDataGrid x:Name="fragmentGrid" Grid.Column="0" Grid.Row="0" Margin="45,75,10,45" BorderThickness="0,1,0,1" BorderBrush="#FF757CBB" HeaderRowHeight="30" RowHeight="30"
                       ItemsSource="{Binding Fragments}" CellStyle="{StaticResource fileCellStyle}" HeaderStyle="{StaticResource fileHeaderStyle}"
                       AutoGenerateColumns="False" AllowResizingColumns="True">
                <syncfusion:SfDataGrid.DataContext>
                    <local:FragmentModel/>
                </syncfusion:SfDataGrid.DataContext>

                <syncfusion:SfDataGrid.Columns>
                    <syncfusion:GridNumericColumn MappingName="Index" HeaderText="#" AllowEditing="False" AllowFocus="False" AllowSorting="True" 
                                           HorizontalHeaderContentAlignment="Center" ColumnSizer="SizeToHeader" TextAlignment="Center"/>
                    <syncfusion:GridNumericColumn MappingName="Mz" HeaderText="m/z" AllowEditing="False" AllowFocus="False" AllowSorting="True" 
                                           HorizontalHeaderContentAlignment="Center" ColumnSizer="AutoWithLastColumnFill" Width="70" TextAlignment="Center" />
                    <syncfusion:GridNumericColumn MappingName="Abs_int" HeaderText="Abs Int." AllowEditing="False" AllowFocus="False" AllowSorting="True" 
                                           HorizontalHeaderContentAlignment="Center" ColumnSizer="AutoWithLastColumnFill"  TextAlignment="Center"/>
                    <syncfusion:GridNumericColumn MappingName="Rel_int" HeaderText="Rel Int." AllowEditing="False" AllowFocus="False" AllowSorting="True" 
                                           HorizontalHeaderContentAlignment="Center" ColumnSizer="AutoWithLastColumnFill" Width="60" TextAlignment="Center"/>
                    <syncfusion:GridTextColumn MappingName="Formula" HeaderText="Formula" AllowEditing="False" AllowFocus="False" AllowSorting="True" TextAlignment="Center"
                                           HorizontalHeaderContentAlignment="Center" ColumnSizer="AutoWithLastColumnFill"/>
                    <!--<syncfusion:GridTextColumn MappingName="FilePath"/>-->
                </syncfusion:SfDataGrid.Columns>

            </syncfusion:SfDataGrid>
            <Button Content="Export Table" Grid.Column="0" Grid.Row="0" HorizontalAlignment="Right" VerticalAlignment="Bottom" Width="110" Height="30" 
                FontSize="14" CornerRadius="5,5,5,5" Margin="45,10,10,10" Click="ExportMs2Fragments_Click"/>

            <TextBlock x:Name="ms1ComparePlotExpLabel" Text="Experimental" Foreground="Black"  Grid.Column="0" Grid.Row="1" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="100,25,30,10" Visibility="Collapsed"/>
            <TextBlock x:Name="ms1ComparePlotTheoLabel" Text="Theoretical" Foreground="Black" Grid.Column="0" Grid.Row="1" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="100,10,30,65" Visibility="Collapsed"/>

            <StackPanel x:Name="ms1PlotIspSimilaritySP" Grid.Column="0" Grid.Row="1" HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="45,10,10,5" CornerRadius="10,10,10,10" Visibility="Collapsed">
                <StackPanel.Background>
                    <LinearGradientBrush EndPoint="1,1" StartPoint="0,0">
                        <GradientStop Color="#FFB1B1B1"/>
                        <GradientStop Color="#FFE0E0E0" Offset="1"/>
                    </LinearGradientBrush>
                </StackPanel.Background>
                <TextBlock x:Name="ms1PlotIspSimilarity" Foreground="Black" Margin="10,2,10,2" HorizontalAlignment="Center">
                </TextBlock>
            </StackPanel>
            <Image x:Name="emptyMS1CompareImage" Grid.Column="0" Grid.Row="1" Height="200" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="45,10,10,10" Source="ms-appx:///Image/MS1IsotopeCompare.png"/>
            <oxy:PlotView x:Name="MS1ComparePlot" Grid.Column="0" Grid.Row="1" Background="#00F1F1F1" Margin="35,10,10,5" HorizontalAlignment="Stretch"/>

            <StackPanel x:Name="batchExportProgress" Grid.Column="0" Grid.Row="1" Height="75" Width="300" HorizontalAlignment="Right" VerticalAlignment="Bottom" Visibility="Collapsed"
                        Margin="0,20,20,20" Background="#CCE5EFFF" CornerRadius="20,20,20,20" BorderBrush="#FFA9CCF1" BorderThickness="1.5" Orientation="Horizontal">
                <Image Source="ms-appx:///Image/info.png" Margin="15,15,15,15"/>
                <StackPanel Orientation="Vertical" Width="220">
                    <TextBlock Text="Summarizing and exporting BUDDY results." FontSize="15" TextWrapping="Wrap" Margin="10,5,5,5"/>
                    <muxc:ProgressBar x:Name="exportProgressbar" Width="190" BorderThickness="6" Margin="0,0,5,5"/>
                </StackPanel>
            </StackPanel>

            <StackPanel x:Name="projectSaveProgress" Grid.Column="0" Grid.Row="1" Height="75" Width="300" HorizontalAlignment="Right" VerticalAlignment="Bottom" Visibility="Collapsed"
                        Margin="0,20,20,20" Background="#CCE5EFFF" CornerRadius="20,20,20,20" BorderBrush="#FFA9CCF1" BorderThickness="1.5" Orientation="Horizontal">
                <Image Source="ms-appx:///Image/info.png" Margin="15,15,15,15"/>
                <StackPanel Orientation="Vertical" Width="220">
                    <TextBlock Text="Summarizing and exporting BUDDY results." FontSize="15" TextWrapping="Wrap" Margin="10,5,5,5"/>
                    <muxc:ProgressBar x:Name="projectSaveProgressbar" Width="190" BorderThickness="6" Margin="0,0,5,5"/>
                </StackPanel>
            </StackPanel>

            <controls:GridSplitter
            GripperCursor="Default"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Bottom"
            Grid.Row="0"
            Grid.Column="0"
            ResizeDirection="Rows"
            ResizeBehavior="CurrentAndNext"
            CursorBehavior="ChangeOnSplitterHover"
            Background="Transparent"
            Height="10" FocusVisualPrimaryBrush="Transparent" GripperForeground="Transparent" Foreground="#FF9288C5" >
                <controls:GridSplitter.RenderTransform>
                    <TranslateTransform Y="8" />
                </controls:GridSplitter.RenderTransform>
            </controls:GridSplitter>


        </Grid>

        <Border Grid.ColumnSpan="3" Grid.Row="0" BorderThickness="0,0,0,3" RequestedTheme="Dark"/>

        <muxc:MenuBar Grid.ColumnSpan="3" Grid.Row="0" Height="35" RequestedTheme="Dark" Background="#FF353535">
            <muxc:MenuBarItem x:Name="menubar_project" Title="Project" Margin="6,0,6,0" FocusVisualPrimaryThickness="1,2,2,2" RequestedTheme="Dark">
                <MenuFlyoutItem Text="New (Single search)" Click="ImportSingleMS2_Click">
                    <MenuFlyoutItem.Icon>
                        <FontIcon Glyph="&#xE7C3;"/>
                    </MenuFlyoutItem.Icon>
                </MenuFlyoutItem>
                <MenuFlyoutSubItem Text="New (Batch search)">
                    <MenuFlyoutSubItem.Icon>
                        <FontIcon Glyph="&#xF571;"/>
                    </MenuFlyoutSubItem.Icon>
                    <MenuFlyoutSubItem Text="Feature Table">
                        <MenuFlyoutItem Text="From MS-DIAL" Click="ImportMSDIAL_Click"/>
                        <MenuFlyoutItem Text="Custom Table" Click="ImportCustomCSV_Click"/>
                    </MenuFlyoutSubItem>
                    <MenuFlyoutItem Text="mzML File" Click="ImportMZML_Click"/>
                    <MenuFlyoutItem Text="MGF File" Click="ImportMGF_Click"/>
                </MenuFlyoutSubItem>
                <MenuFlyoutSeparator />
                <MenuFlyoutItem Text="Open" Click="OpenProject_Click">
                    <MenuFlyoutItem.Icon>
                        <FontIcon Glyph="&#xE838;"/>
                    </MenuFlyoutItem.Icon>
                </MenuFlyoutItem>
                <MenuFlyoutItem Text="Save" Click="SaveProject_Click">
                    <MenuFlyoutItem.Icon>
                        <FontIcon Glyph="&#xE74E;"/>
                    </MenuFlyoutItem.Icon>
                </MenuFlyoutItem>
                <MenuFlyoutItem Text="Save as" Click="SaveAsProject_Click">
                    <!--<MenuFlyoutItem.Icon>
                        <FontIcon Glyph="&#xE72D;"/>
                    </MenuFlyoutItem.Icon>-->
                </MenuFlyoutItem>
                <!--<MenuFlyoutSeparator />
                <MenuFlyoutItem Text="Close">
                    <MenuFlyoutItem.Icon>
                        <FontIcon Glyph="&#xE8BB;"/>
                    </MenuFlyoutItem.Icon>
                </MenuFlyoutItem>-->

            </muxc:MenuBarItem>

            <muxc:MenuBarItem x:Name="menubar_settings" Title="Settings" Margin="6,0,6,0" RequestedTheme="Dark">
                <MenuFlyoutItem Text="Basic" Click="OpenBasicSetting">
                    <MenuFlyoutItem.Icon>
                        <FontIcon Glyph="&#xE700;"/>
                    </MenuFlyoutItem.Icon>
                </MenuFlyoutItem>

                <MenuFlyoutItem Text="Advanced" Click="OpenAdvancedSetting">
                    <MenuFlyoutItem.Icon>
                        <FontIcon Glyph="&#xEF58;"/>
                    </MenuFlyoutItem.Icon>
                </MenuFlyoutItem>

            </muxc:MenuBarItem>

            <muxc:MenuBarItem x:Name="menubar_export" Title="Export" Margin="6,0,6,0" RequestedTheme="Dark">
                <!--<MenuFlyoutItem Text="Output"/>
                <MenuFlyoutSeparator/>
                <muxc:RadioMenuFlyoutItem Text="Landscape" GroupName="OrientationGroup"/>
                <muxc:RadioMenuFlyoutItem Text="Portrait" GroupName="OrientationGroup" IsChecked="True"/>
                <MenuFlyoutSeparator/>
                <muxc:RadioMenuFlyoutItem Text="Small icons" GroupName="SizeGroup"/>
                <muxc:RadioMenuFlyoutItem Text="Medium icons" IsChecked="True" GroupName="SizeGroup"/>
                <muxc:RadioMenuFlyoutItem Text="Large icons" GroupName="SizeGroup"/>-->
                <MenuFlyoutItem Text="Export Single Query" Click="ExportSingleMS2_Click">
                    <MenuFlyoutItem.Icon>
                        <FontIcon Glyph="&#xE72D;"/>
                    </MenuFlyoutItem.Icon>
                </MenuFlyoutItem>
                <MenuFlyoutSubItem Text="Export Batch Results">
                    <MenuFlyoutItem Text="Export Batch Summary" Click="ExportBatchSummary_Click">
                    </MenuFlyoutItem>
                    <MenuFlyoutItem Text="Export Detailed Results" Click="ExportBatchDetailedResults_Click"/>
                </MenuFlyoutSubItem>


            </muxc:MenuBarItem>

            <muxc:MenuBarItem x:Name="menubar_help" Title="Help" Margin="6,0,6,0" RequestedTheme="Dark">
                <MenuFlyoutItem Text="About" Click="About_Click">
                    <MenuFlyoutItem.Icon>
                        <FontIcon Glyph="&#xE783;"/>
                    </MenuFlyoutItem.Icon>
                </MenuFlyoutItem>
                <MenuFlyoutItem Text="User Manual" Click="UserManual_Click">
                    <MenuFlyoutItem.Icon>
                        <FontIcon Glyph="&#xE82F;"/>
                    </MenuFlyoutItem.Icon>
                </MenuFlyoutItem>
            </muxc:MenuBarItem>

        </muxc:MenuBar>

        <controls:GridSplitter
            GripperCursor="Default"
            HorizontalAlignment="Right"
            VerticalAlignment="Stretch"
            Grid.Column="0"
            Grid.Row="1"
            Grid.RowSpan="3"
            ResizeDirection="Columns"
            ResizeBehavior="CurrentAndNext"
            CursorBehavior="ChangeOnSplitterHover"
            Background="Transparent"
            Width="10" FocusVisualPrimaryBrush="Transparent" GripperForeground="Transparent" Foreground="#FF9288C5" >
            <controls:GridSplitter.RenderTransform>
                <TranslateTransform X="8" />
            </controls:GridSplitter.RenderTransform>

        </controls:GridSplitter>

        <controls:GridSplitter
            GripperCursor="Default"
            HorizontalAlignment="Right"
            VerticalAlignment="Stretch"
            Grid.Column="1"
            Grid.Row="1"
            Grid.RowSpan="3"
            ResizeDirection="Columns"
            ResizeBehavior="CurrentAndNext"
            CursorBehavior="ChangeOnSplitterHover"
            Background="Transparent"
            Width="10" FocusVisualPrimaryBrush="Transparent" GripperForeground="Transparent" Foreground="#FF9288C5" >
            <controls:GridSplitter.RenderTransform>
                <TranslateTransform X="8" />
            </controls:GridSplitter.RenderTransform>

        </controls:GridSplitter>

    </Grid>
</Page>
